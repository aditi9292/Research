<html>
<head>
<style type="text/css">
body {font-family:Arial}
table {background-color:white; border:0px solid white; width:95%; margin-left:auto; margin-right: auto}
td {background-color:#b0c4de; padding:16px; border:4px solid white}
pre {background-color:white; padding:4px}
</style>
<title>
NiCad Clone Report
</title>
</head>
<body>
<h2>
NiCad Clone Report
</h2>
System: _
<br>
<br>Granularity: unctions
<br>Max difference threshold: 40%
<br>Clone size: 3 - 2500 lines
<br>
<br>Total unctions: 78
<br>Clone pairs found: 17
<br>
<br>LCS compares: 959 &nbsp;&nbsp;&nbsp; CPU time: 0 min 0.0 sec
<br>
<br>Number of  classes: 9
<br>
<h3>Clone class 1, 3 fragments, nominal size 56 lines, similarity 60%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 823 - 874 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_tostereo(PyObject *self, PyObject *args)
{
        signed char *cp, *ncp;
        int len, size, val1, val2, val = 0;
        double fac1, fac2, fval, maxval;
        PyObject *rv;
        int i;

        if ( !PyArg_ParseTuple(args, "s#idd:tostereo",
	                       &amp;cp, &amp;len, &amp;size, &amp;fac1, &amp;fac2 ) )
                return 0;
    
        if ( size == 1 ) maxval = (double) 0x7f;
        else if ( size == 2 ) maxval = (double) 0x7fff;
        else if ( size == 4 ) maxval = (double) 0x7fffffff;
        else {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len*2);
        if ( rv == 0 )
                return 0;
        ncp = (signed char *)PyString_AsString(rv);
    
    
        for ( i=0; i &lt; len; i += size ) {
                if ( size == 1 )      val = (int)*CHARP(cp, i);
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = (int)*LONGP(cp, i);

                fval = (double)val*fac1;
                if ( fval &gt; maxval ) fval = maxval;
                else if ( fval &lt; -maxval ) fval = -maxval;
                val1 = (int)fval;

                fval = (double)val*fac2;
                if ( fval &gt; maxval ) fval = maxval;
                else if ( fval &lt; -maxval ) fval = -maxval;
                val2 = (int)fval;

                if ( size == 1 )      *CHARP(ncp, i*2) = (signed char)val1;
                else if ( size == 2 ) *SHORTP(ncp, i*2) = (short)val1;
                else if ( size == 4 ) *LONGP(ncp, i*2) = (Py_Int32)val1;

                if ( size == 1 )      *CHARP(ncp, i*2+1) = (signed char)val2;
                else if ( size == 2 ) *SHORTP(ncp, i*2+2) = (short)val2;
                else if ( size == 4 ) *LONGP(ncp, i*2+4) = (Py_Int32)val2;
        }
        return rv;
}
</pre>
</td></tr>
<tr><td>
Lines 737 - 776 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_mul(PyObject *self, PyObject *args)
{
        signed char *cp, *ncp;
        int len, size, val = 0;
        double factor, fval, maxval;
        PyObject *rv;
        int i;

        if ( !PyArg_ParseTuple(args, "s#id:mul", &amp;cp, &amp;len, &amp;size, &amp;factor ) )
                return 0;
    
        if ( size == 1 ) maxval = (double) 0x7f;
        else if ( size == 2 ) maxval = (double) 0x7fff;
        else if ( size == 4 ) maxval = (double) 0x7fffffff;
        else {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len);
        if ( rv == 0 )
                return 0;
        ncp = (signed char *)PyString_AsString(rv);
    
    
        for ( i=0; i &lt; len; i += size ) {
                if ( size == 1 )      val = (int)*CHARP(cp, i);
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = (int)*LONGP(cp, i);
                fval = (double)val*factor;
                if ( fval &gt; maxval ) fval = maxval;
                else if ( fval &lt; -maxval ) fval = -maxval;
                val = (int)fval;
                if ( size == 1 )      *CHARP(ncp, i) = (signed char)val;
                else if ( size == 2 ) *SHORTP(ncp, i) = (short)val;
                else if ( size == 4 ) *LONGP(ncp, i) = (Py_Int32)val;
        }
        return rv;
}
</pre>
</td></tr>
<tr><td>
Lines 778 - 821 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_tomono(PyObject *self, PyObject *args)
{
        signed char *cp, *ncp;
        int len, size, val1 = 0, val2 = 0;
        double fac1, fac2, fval, maxval;
        PyObject *rv;
        int i;

        if ( !PyArg_ParseTuple(args, "s#idd:tomono",
	                       &amp;cp, &amp;len, &amp;size, &amp;fac1, &amp;fac2 ) )
                return 0;
    
        if ( size == 1 ) maxval = (double) 0x7f;
        else if ( size == 2 ) maxval = (double) 0x7fff;
        else if ( size == 4 ) maxval = (double) 0x7fffffff;
        else {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len/2);
        if ( rv == 0 )
                return 0;
        ncp = (signed char *)PyString_AsString(rv);
    
    
        for ( i=0; i &lt; len; i += size*2 ) {
                if ( size == 1 )      val1 = (int)*CHARP(cp, i);
                else if ( size == 2 ) val1 = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val1 = (int)*LONGP(cp, i);
                if ( size == 1 )      val2 = (int)*CHARP(cp, i+1);
                else if ( size == 2 ) val2 = (int)*SHORTP(cp, i+2);
                else if ( size == 4 ) val2 = (int)*LONGP(cp, i+4);
                fval = (double)val1*fac1 + (double)val2*fac2;
                if ( fval &gt; maxval ) fval = maxval;
                else if ( fval &lt; -maxval ) fval = -maxval;
                val1 = (int)fval;
                if ( size == 1 )      *CHARP(ncp, i/2) = (signed char)val1;
                else if ( size == 2 ) *SHORTP(ncp, i/2) = (short)val1;
                else if ( size == 4 ) *LONGP(ncp, i/2)= (Py_Int32)val1;
        }
        return rv;
}
</pre>
</td></tr>
</table>
<h3>Clone class 2, 2 fragments, nominal size 54 lines, similarity 79%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 600 - 655 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_avgpp(PyObject *self, PyObject *args)
{
        signed char *cp;
        int len, size, val = 0, prevval = 0, prevextremevalid = 0,
                prevextreme = 0;
        int i;
        double avg = 0.0;
        int diff, prevdiff, extremediff, nextreme = 0;

        if ( !PyArg_ParseTuple(args, "s#i:avgpp", &amp;cp, &amp;len, &amp;size) )
                return 0;
        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4 ) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
        /* Compute first delta value ahead. Also automatically makes us
        ** skip the first extreme value
        */
        if ( size == 1 )      prevval = (int)*CHARP(cp, 0);
        else if ( size == 2 ) prevval = (int)*SHORTP(cp, 0);
        else if ( size == 4 ) prevval = (int)*LONGP(cp, 0);
        if ( size == 1 )      val = (int)*CHARP(cp, size);
        else if ( size == 2 ) val = (int)*SHORTP(cp, size);
        else if ( size == 4 ) val = (int)*LONGP(cp, size);
        prevdiff = val - prevval;
    
        for ( i=size; i&lt;len; i+= size) {
                if ( size == 1 )      val = (int)*CHARP(cp, i);
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = (int)*LONGP(cp, i);
                diff = val - prevval;
                if ( diff*prevdiff &lt; 0 ) {
                        /* Derivative changed sign. Compute difference to last
                        ** extreme value and remember.
                        */
                        if ( prevextremevalid ) {
                                extremediff = prevval - prevextreme;
                                if ( extremediff &lt; 0 )
                                        extremediff = -extremediff;
                                avg += extremediff;
                                nextreme++;
                        }
                        prevextremevalid = 1;
                        prevextreme = prevval;
                }
                prevval = val;
                if ( diff != 0 )
                        prevdiff = diff;        
        }
        if ( nextreme == 0 )
                val = 0;
        else
                val = (int)(avg / (double)nextreme);
        return PyInt_FromLong(val);
}
</pre>
</td></tr>
<tr><td>
Lines 657 - 708 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_maxpp(PyObject *self, PyObject *args)
{
        signed char *cp;
        int len, size, val = 0, prevval = 0, prevextremevalid = 0,
                prevextreme = 0;
        int i;
        int max = 0;
        int diff, prevdiff, extremediff;

        if ( !PyArg_ParseTuple(args, "s#i:maxpp", &amp;cp, &amp;len, &amp;size) )
                return 0;
        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4 ) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
        /* Compute first delta value ahead. Also automatically makes us
        ** skip the first extreme value
        */
        if ( size == 1 )      prevval = (int)*CHARP(cp, 0);
        else if ( size == 2 ) prevval = (int)*SHORTP(cp, 0);
        else if ( size == 4 ) prevval = (int)*LONGP(cp, 0);
        if ( size == 1 )      val = (int)*CHARP(cp, size);
        else if ( size == 2 ) val = (int)*SHORTP(cp, size);
        else if ( size == 4 ) val = (int)*LONGP(cp, size);
        prevdiff = val - prevval;

        for ( i=size; i&lt;len; i+= size) {
                if ( size == 1 )      val = (int)*CHARP(cp, i);
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = (int)*LONGP(cp, i);
                diff = val - prevval;
                if ( diff*prevdiff &lt; 0 ) {
                        /* Derivative changed sign. Compute difference to
                        ** last extreme value and remember.
                        */
                        if ( prevextremevalid ) {
                                extremediff = prevval - prevextreme;
                                if ( extremediff &lt; 0 )
                                        extremediff = -extremediff;
                                if ( extremediff &gt; max )
                                        max = extremediff;
                        }
                        prevextremevalid = 1;
                        prevextreme = prevval;
                }
                prevval = val;
                if ( diff != 0 )
                        prevdiff = diff;
        }
        return PyInt_FromLong(max);
}
</pre>
</td></tr>
</table>
<h3>Clone class 3, 5 fragments, nominal size 33 lines, similarity 63%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 965 - 1000 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_reverse(PyObject *self, PyObject *args)
{
        signed char *cp;
        unsigned char *ncp;
        int len, size, val = 0;
        PyObject *rv;
        int i, j;

        if ( !PyArg_ParseTuple(args, "s#i:reverse",
                          &amp;cp, &amp;len, &amp;size) )
                return 0;

        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4 ) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len);
        if ( rv == 0 )
                return 0;
        ncp = (unsigned char *)PyString_AsString(rv);
    
        for ( i=0; i &lt; len; i += size ) {
                if ( size == 1 )      val = ((int)*CHARP(cp, i)) &lt;&lt; 8;
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = ((int)*LONGP(cp, i)) &gt;&gt; 16;

                j = len - i - size;
        
                if ( size == 1 )      *CHARP(ncp, j) = (signed char)(val &gt;&gt; 8);
                else if ( size == 2 ) *SHORTP(ncp, j) = (short)(val);
                else if ( size == 4 ) *LONGP(ncp, j) = (Py_Int32)(val&lt;&lt;16);
        }
        return rv;
}
</pre>
</td></tr>
<tr><td>
Lines 1002 - 1036 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_lin2lin(PyObject *self, PyObject *args)
{
        signed char *cp;
        unsigned char *ncp;
        int len, size, size2, val = 0;
        PyObject *rv;
        int i, j;

        if ( !PyArg_ParseTuple(args, "s#ii:lin2lin",
                          &amp;cp, &amp;len, &amp;size, &amp;size2) )
                return 0;

        if ( (size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4) ||
             (size2 != 1 &amp;&amp; size2 != 2 &amp;&amp; size2 != 4)) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, (len/size)*size2);
        if ( rv == 0 )
                return 0;
        ncp = (unsigned char *)PyString_AsString(rv);
    
        for ( i=0, j=0; i &lt; len; i += size, j += size2 ) {
                if ( size == 1 )      val = ((int)*CHARP(cp, i)) &lt;&lt; 8;
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = ((int)*LONGP(cp, i)) &gt;&gt; 16;

                if ( size2 == 1 )  *CHARP(ncp, j) = (signed char)(val &gt;&gt; 8);
                else if ( size2 == 2 ) *SHORTP(ncp, j) = (short)(val);
                else if ( size2 == 4 ) *LONGP(ncp, j) = (Py_Int32)(val&lt;&lt;16);
        }
        return rv;
}
</pre>
</td></tr>
<tr><td>
Lines 929 - 963 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_bias(PyObject *self, PyObject *args)
{
        signed char *cp, *ncp;
        int len, size, val = 0;
        PyObject *rv;
        int i;
        int bias;

        if ( !PyArg_ParseTuple(args, "s#ii:bias",
                          &amp;cp, &amp;len, &amp;size , &amp;bias) )
                return 0;

        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len);
        if ( rv == 0 )
                return 0;
        ncp = (signed char *)PyString_AsString(rv);
    
    
        for ( i=0; i &lt; len; i += size ) {
                if ( size == 1 )      val = (int)*CHARP(cp, i);
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = (int)*LONGP(cp, i);
        
                if ( size == 1 )      *CHARP(ncp, i) = (signed char)(val+bias);
                else if ( size == 2 ) *SHORTP(ncp, i) = (short)(val+bias);
                else if ( size == 4 ) *LONGP(ncp, i) = (Py_Int32)(val+bias);
        }
        return rv;
}
</pre>
</td></tr>
<tr><td>
Lines 1303 - 1334 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_lin2alaw(PyObject *self, PyObject *args)
{
        signed char *cp;
        unsigned char *ncp;
        int len, size, val = 0;
        PyObject *rv;
        int i;

        if ( !PyArg_ParseTuple(args, "s#i:lin2alaw",
                               &amp;cp, &amp;len, &amp;size) )
                return 0;

        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len/size);
        if ( rv == 0 )
                return 0;
        ncp = (unsigned char *)PyString_AsString(rv);
    
        for ( i=0; i &lt; len; i += size ) {
                if ( size == 1 )      val = ((int)*CHARP(cp, i)) &lt;&lt; 8;
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = ((int)*LONGP(cp, i)) &gt;&gt; 16;

                *ncp++ = st_linear2alaw(val);
        }
        return rv;
}
</pre>
</td></tr>
<tr><td>
Lines 1235 - 1266 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_lin2ulaw(PyObject *self, PyObject *args)
{
        signed char *cp;
        unsigned char *ncp;
        int len, size, val = 0;
        PyObject *rv;
        int i;

        if ( !PyArg_ParseTuple(args, "s#i:lin2ulaw",
                               &amp;cp, &amp;len, &amp;size) )
                return 0 ;

        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len/size);
        if ( rv == 0 )
                return 0;
        ncp = (unsigned char *)PyString_AsString(rv);
    
        for ( i=0; i &lt; len; i += size ) {
                if ( size == 1 )      val = ((int)*CHARP(cp, i)) &lt;&lt; 8;
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = ((int)*LONGP(cp, i)) &gt;&gt; 16;

                *ncp++ = st_14linear2ulaw(val);
        }
        return rv;
}
</pre>
</td></tr>
</table>
<h3>Clone class 4, 2 fragments, nominal size 29 lines, similarity 89%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 1268 - 1301 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_ulaw2lin(PyObject *self, PyObject *args)
{
        unsigned char *cp;
        unsigned char cval;
        signed char *ncp;
        int len, size, val;
        PyObject *rv;
        int i;

        if ( !PyArg_ParseTuple(args, "s#i:ulaw2lin",
                               &amp;cp, &amp;len, &amp;size) )
                return 0;

        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len*size);
        if ( rv == 0 )
                return 0;
        ncp = (signed char *)PyString_AsString(rv);
    
        for ( i=0; i &lt; len*size; i += size ) {
                cval = *cp++;
                val = st_ulaw2linear16(cval);
        
                if ( size == 1 )      *CHARP(ncp, i) = (signed char)(val &gt;&gt; 8);
                else if ( size == 2 ) *SHORTP(ncp, i) = (short)(val);
                else if ( size == 4 ) *LONGP(ncp, i) = (Py_Int32)(val&lt;&lt;16);
        }
        return rv;
}
</pre>
</td></tr>
<tr><td>
Lines 1336 - 1369 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_alaw2lin(PyObject *self, PyObject *args)
{
        unsigned char *cp;
        unsigned char cval;
        signed char *ncp;
        int len, size, val;
        PyObject *rv;
        int i;

        if ( !PyArg_ParseTuple(args, "s#i:alaw2lin",
                               &amp;cp, &amp;len, &amp;size) )
                return 0;

        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
    
        rv = PyString_FromStringAndSize(NULL, len*size);
        if ( rv == 0 )
                return 0;
        ncp = (signed char *)PyString_AsString(rv);
    
        for ( i=0; i &lt; len*size; i += size ) {
                cval = *cp++;
                val = st_alaw2linear16(cval);
        
                if ( size == 1 )      *CHARP(ncp, i) = (signed char)(val &gt;&gt; 8);
                else if ( size == 2 ) *SHORTP(ncp, i) = (short)(val);
                else if ( size == 4 ) *LONGP(ncp, i) = (Py_Int32)(val&lt;&lt;16);
        }
        return rv;
}
</pre>
</td></tr>
</table>
<h3>Clone class 5, 4 fragments, nominal size 26 lines, similarity 65%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 369 - 394 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_avg(PyObject *self, PyObject *args)
{
        signed char *cp;
        int len, size, val = 0;
        int i;
        double avg = 0.0;

        if ( !PyArg_ParseTuple(args, "s#i:avg", &amp;cp, &amp;len, &amp;size) )
                return 0;
        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4 ) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
        for ( i=0; i&lt;len; i+= size) {
                if ( size == 1 )      val = (int)*CHARP(cp, i);
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = (int)*LONGP(cp, i);
                avg += val;
        }
        if ( len == 0 )
                val = 0;
        else
                val = (int)(avg / (double)(len/size));
        return PyInt_FromLong(val);
}
</pre>
</td></tr>
<tr><td>
Lines 396 - 421 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_rms(PyObject *self, PyObject *args)
{
        signed char *cp;
        int len, size, val = 0;
        int i;
        double sum_squares = 0.0;

        if ( !PyArg_ParseTuple(args, "s#i:rms", &amp;cp, &amp;len, &amp;size) )
                return 0;
        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4 ) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
        for ( i=0; i&lt;len; i+= size) {
                if ( size == 1 )      val = (int)*CHARP(cp, i);
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = (int)*LONGP(cp, i);
                sum_squares += (double)val*(double)val;
        }
        if ( len == 0 )
                val = 0;
        else
                val = (int)sqrt(sum_squares / (double)(len/size));
        return PyInt_FromLong(val);
}
</pre>
</td></tr>
<tr><td>
Lines 321 - 343 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_max(PyObject *self, PyObject *args)
{
        signed char *cp;
        int len, size, val = 0;
        int i;
        int max = 0;

        if ( !PyArg_ParseTuple(args, "s#i:max", &amp;cp, &amp;len, &amp;size) )
                return 0;
        if ( size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4 ) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return 0;
        }
        for ( i=0; i&lt;len; i+= size) {
                if ( size == 1 )      val = (int)*CHARP(cp, i);
                else if ( size == 2 ) val = (int)*SHORTP(cp, i);
                else if ( size == 4 ) val = (int)*LONGP(cp, i);
                if ( val &lt; 0 ) val = (-val);
                if ( val &gt; max ) max = val;
        }
        return PyInt_FromLong(max);
}
</pre>
</td></tr>
<tr><td>
Lines 345 - 367 of examples2/python//audioop.c.ifdefed
<pre>
static PyObject *
audioop_minmax(PyObject *self, PyObject *args)
{
        signed char *cp;
        int len, size, val = 0;
        int i;
        int min = 0x7fffffff, max = -0x7fffffff;

        if (!PyArg_ParseTuple(args, "s#i:minmax", &amp;cp, &amp;len, &amp;size))
                return NULL;
        if (size != 1 &amp;&amp; size != 2 &amp;&amp; size != 4) {
                PyErr_SetString(AudioopError, "Size should be 1, 2 or 4");
                return NULL;
        }
        for (i = 0; i &lt; len; i += size) {
                if (size == 1) val = (int) *CHARP(cp, i);
                else if (size == 2) val = (int) *SHORTP(cp, i);
                else if (size == 4) val = (int) *LONGP(cp, i);
                if (val &gt; max) max = val;
                if (val &lt; min) min = val;
        }
        return Py_BuildValue("(ii)", min, max);
}
</pre>
</td></tr>
</table>
<h3>Clone class 6, 2 fragments, nominal size 17 lines, similarity 70%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 112 - 130 of examples2/python//fpetestmodule.c.ifdefed
<pre>
static double nest1(int i, double x)
{
  double a = 1.0;

  PyFPE_START_PROTECT("Division by zero, outer zone", return 3.1416)
  if(i == 0){
    a = 1./x;
  }else if(i == 1){
    /* This (following) message is never seen. */
    PyFPE_START_PROTECT("Division by zero, inner zone", return 3.1416)
    a = 1./(1. - x);
    PyFPE_END_PROTECT(a)
  }else if(i == 2){
    a = 1./(2. - x);
  }
  PyFPE_END_PROTECT(a)

  return a;
}
</pre>
</td></tr>
<tr><td>
Lines 132 - 145 of examples2/python//fpetestmodule.c.ifdefed
<pre>
static double nest2(int i, double x)
{
  double a = 1.0;
  PyFPE_START_PROTECT("Division by zero, prior error", return 3.1416)
  if(i == 0){
    a = 1./x;
  }else if(i == 1){
    a = nest3(x);
  }else if(i == 2){
    a = 1./(2. - x);
  }
  PyFPE_END_PROTECT(a)
  return a;
}
</pre>
</td></tr>
</table>
<h3>Clone class 7, 2 fragments, nominal size 10 lines, similarity 70%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 289 - 299 of examples2/python//fpectlmodule.c.ifdefed
<pre>
PyMODINIT_FUNC initfpectl(void)
{
    PyObject *m, *d;
    m = Py_InitModule("fpectl", fpectl_methods);
    if (m == NULL)
    	return;
    d = PyModule_GetDict(m);
    fpe_error = PyErr_NewException("fpectl.error", NULL, NULL);
    if (fpe_error != NULL)
	PyDict_SetItemString(d, "error", fpe_error);
}
</pre>
</td></tr>
<tr><td>
Lines 175 - 186 of examples2/python//fpetestmodule.c.ifdefed
<pre>
PyMODINIT_FUNC initfpetest(void)
{
    PyObject *m, *d;

    m = Py_InitModule("fpetest", fpetest_methods);
    if (m == NULL)
    	return;
    d = PyModule_GetDict(m);
    fpe_error = PyErr_NewException("fpetest.error", NULL, NULL);
    if (fpe_error != NULL)
	    PyDict_SetItemString(d, "error", fpe_error);
}
</pre>
</td></tr>
</table>
<h3>Clone class 8, 2 fragments, nominal size 6 lines, similarity 66%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 72 - 80 of examples2/python//cmathmodule.c.ifdefed
<pre>
static Py_complex
c_asinh(Py_complex x)
{
	Py_complex z;
	z = c_sqrt(c_half);
	z = c_log(c_prod(z, c_sum(c_sqrt(c_sum(x, c_i)),
				  c_sqrt(c_diff(x, c_i)))));
	return c_sum(z, z);
}
</pre>
</td></tr>
<tr><td>
Lines 39 - 47 of examples2/python//cmathmodule.c.ifdefed
<pre>
static Py_complex
c_acosh(Py_complex x)
{
	Py_complex z;
	z = c_sqrt(c_half);
	z = c_log(c_prod(z, c_sum(c_sqrt(c_sum(x,c_one)),
				  c_sqrt(c_diff(x,c_one)))));
	return c_sum(z, z);
}
</pre>
</td></tr>
</table>
<h3>Clone class 9, 2 fragments, nominal size 5 lines, similarity 60%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 103 - 110 of examples2/python//fpectlmodule.c.ifdefed
<pre>
static PyObject *turnon_sigfpe(PyObject *self,PyObject *args)
{
    /* Do any architecture-specific one-time only initialization here. */

    fpe_reset(sigfpe_handler);
    Py_INCREF (Py_None);
    return Py_None;
}
</pre>
</td></tr>
<tr><td>
Lines 259 - 277 of examples2/python//fpectlmodule.c.ifdefed
<pre>
static PyObject *turnoff_sigfpe(PyObject *self,PyObject *args)
{
//#ifdef __FreeBSD__
//    fpresetsticky(fpgetsticky());
//    fpsetmask(0);
//#elif defined(__VMS)
//	IEEE clrmsk;
//	 clrmsk.ieee$q_flags =
//		IEEE$M_TRAP_ENABLE_UNF |  IEEE$M_TRAP_ENABLE_INE |
//		IEEE$M_MAP_UMZ | IEEE$M_TRAP_ENABLE_INV |
//		IEEE$M_TRAP_ENABLE_DZE | IEEE$M_TRAP_ENABLE_OVF |
//		IEEE$M_INHERIT;
//	sys$ieee_set_fp_control(&amp;clrmsk, 0, 0);
//#else
    fputs("Operation not implemented\n", stderr);
//#endif
    Py_INCREF(Py_None);
    return Py_None;
}
</pre>
</td></tr>
</table>
</body>
</html>
