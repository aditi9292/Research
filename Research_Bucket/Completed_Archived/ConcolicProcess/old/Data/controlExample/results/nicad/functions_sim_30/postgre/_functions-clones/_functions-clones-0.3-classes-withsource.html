<html>
<head>
<style type="text/css">
body {font-family:Arial}
table {background-color:white; border:0px solid white; width:95%; margin-left:auto; margin-right: auto}
td {background-color:#b0c4de; padding:16px; border:4px solid white}
pre {background-color:white; padding:4px}
</style>
<title>
NiCad Clone Report
</title>
</head>
<body>
<h2>
NiCad Clone Report
</h2>
System: _
<br>
<br>Granularity: unctions
<br>Max difference threshold: 30%
<br>Clone size: 3 - 2500 lines
<br>
<br>Total unctions: 289
<br>Clone pairs found: 26
<br>
<br>LCS compares: 16203 &nbsp;&nbsp;&nbsp; CPU time: 0 min 0.0 sec
<br>
<br>Number of  classes: 12
<br>
<h3>Clone class 1, 2 fragments, nominal size 14 lines, similarity 85%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 857 - 877 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_difference_ptr(List *list1, List *list2)
{
	ListCell   *cell;
	List	   *result = NIL;

	Assert(IsPointerList(list1));
	Assert(IsPointerList(list2));

	if (list2 == NIL)
		return list_copy(list1);

	foreach(cell, list1)
	{
		if (!list_member_ptr(list2, lfirst(cell)))
			result = lappend(result, lfirst(cell));
	}

	check_list_invariants(result);
	return result;
}
</pre>
</td></tr>
<tr><td>
Lines 831 - 851 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_difference(List *list1, List *list2)
{
	ListCell   *cell;
	List	   *result = NIL;

	Assert(IsPointerList(list1));
	Assert(IsPointerList(list2));

	if (list2 == NIL)
		return list_copy(list1);

	foreach(cell, list1)
	{
		if (!list_member(list2, lfirst(cell)))
			result = lappend(result, lfirst(cell));
	}

	check_list_invariants(result);
	return result;
}
</pre>
</td></tr>
</table>
<h3>Clone class 2, 2 fragments, nominal size 14 lines, similarity 71%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 545 - 566 of examples/postgresql//smallpostgresql/outfuncs.c.ifdefed
<pre>
static void
_outAgg(StringInfo str, Agg *node)
{
	int			i;

	WRITE_NODE_TYPE("AGG");

	_outPlanInfo(str, (Plan *) node);

	WRITE_ENUM_FIELD(aggstrategy, AggStrategy);
	WRITE_INT_FIELD(numCols);

	appendStringInfo(str, " :grpColIdx");
	for (i = 0; i &lt; node-&gt;numCols; i++)
		appendStringInfo(str, " %d", node-&gt;grpColIdx[i]);

	appendStringInfo(str, " :grpOperators");
	for (i = 0; i &lt; node-&gt;numCols; i++)
		appendStringInfo(str, " %u", node-&gt;grpOperators[i]);

	WRITE_LONG_FIELD(numGroups);
}
</pre>
</td></tr>
<tr><td>
Lines 601 - 619 of examples/postgresql//smallpostgresql/outfuncs.c.ifdefed
<pre>
static void
_outGroup(StringInfo str, Group *node)
{
	int			i;

	WRITE_NODE_TYPE("GROUP");

	_outPlanInfo(str, (Plan *) node);

	WRITE_INT_FIELD(numCols);

	appendStringInfo(str, " :grpColIdx");
	for (i = 0; i &lt; node-&gt;numCols; i++)
		appendStringInfo(str, " %d", node-&gt;grpColIdx[i]);

	appendStringInfo(str, " :grpOperators");
	for (i = 0; i &lt; node-&gt;numCols; i++)
		appendStringInfo(str, " %u", node-&gt;grpOperators[i]);
}
</pre>
</td></tr>
</table>
<h3>Clone class 3, 2 fragments, nominal size 13 lines, similarity 84%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 720 - 738 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_union_ptr(List *list1, List *list2)
{
	List	   *result;
	ListCell   *cell;

	Assert(IsPointerList(list1));
	Assert(IsPointerList(list2));

	result = list_copy(list1);
	foreach(cell, list2)
	{
		if (!list_member_ptr(result, lfirst(cell)))
			result = lappend(result, lfirst(cell));
	}

	check_list_invariants(result);
	return result;
}
</pre>
</td></tr>
<tr><td>
Lines 696 - 714 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_union(List *list1, List *list2)
{
	List	   *result;
	ListCell   *cell;

	Assert(IsPointerList(list1));
	Assert(IsPointerList(list2));

	result = list_copy(list1);
	foreach(cell, list2)
	{
		if (!list_member(result, lfirst(cell)))
			result = lappend(result, lfirst(cell));
	}

	check_list_invariants(result);
	return result;
}
</pre>
</td></tr>
</table>
<h3>Clone class 4, 4 fragments, nominal size 13 lines, similarity 76%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 635 - 655 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_delete_oid(List *list, Oid datum)
{
	ListCell   *cell;
	ListCell   *prev;

	Assert(IsOidList(list));
	check_list_invariants(list);

	prev = NULL;
	foreach(cell, list)
	{
		if (lfirst_oid(cell) == datum)
			return list_delete_cell(list, cell, prev);

		prev = cell;
	}

	/* Didn't find a match: return the list unmodified */
	return list;
}
</pre>
</td></tr>
<tr><td>
Lines 612 - 632 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_delete_int(List *list, int datum)
{
	ListCell   *cell;
	ListCell   *prev;

	Assert(IsIntegerList(list));
	check_list_invariants(list);

	prev = NULL;
	foreach(cell, list)
	{
		if (lfirst_int(cell) == datum)
			return list_delete_cell(list, cell, prev);

		prev = cell;
	}

	/* Didn't find a match: return the list unmodified */
	return list;
}
</pre>
</td></tr>
<tr><td>
Lines 589 - 609 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_delete_ptr(List *list, void *datum)
{
	ListCell   *cell;
	ListCell   *prev;

	Assert(IsPointerList(list));
	check_list_invariants(list);

	prev = NULL;
	foreach(cell, list)
	{
		if (lfirst(cell) == datum)
			return list_delete_cell(list, cell, prev);

		prev = cell;
	}

	/* Didn't find a match: return the list unmodified */
	return list;
}
</pre>
</td></tr>
<tr><td>
Lines 566 - 586 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_delete(List *list, void *datum)
{
	ListCell   *cell;
	ListCell   *prev;

	Assert(IsPointerList(list));
	check_list_invariants(list);

	prev = NULL;
	foreach(cell, list)
	{
		if (equal(lfirst(cell), datum))
			return list_delete_cell(list, cell, prev);

		prev = cell;
	}

	/* Didn't find a match: return the list unmodified */
	return list;
}
</pre>
</td></tr>
</table>
<h3>Clone class 5, 2 fragments, nominal size 11 lines, similarity 81%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 991 - 1007 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_concat_unique(List *list1, List *list2)
{
	ListCell   *cell;

	Assert(IsPointerList(list1));
	Assert(IsPointerList(list2));

	foreach(cell, list2)
	{
		if (!list_member(list1, lfirst(cell)))
			list1 = lappend(list1, lfirst(cell));
	}

	check_list_invariants(list1);
	return list1;
}
</pre>
</td></tr>
<tr><td>
Lines 1013 - 1029 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
list_concat_unique_ptr(List *list1, List *list2)
{
	ListCell   *cell;

	Assert(IsPointerList(list1));
	Assert(IsPointerList(list2));

	foreach(cell, list2)
	{
		if (!list_member_ptr(list1, lfirst(cell)))
			list1 = lappend(list1, lfirst(cell));
	}

	check_list_invariants(list1);
	return list1;
}
</pre>
</td></tr>
</table>
<h3>Clone class 6, 3 fragments, nominal size 11 lines, similarity 81%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 560 - 584 of examples/postgresql//smallpostgresql/readfuncs.c.ifdefed
<pre>
static DistinctExpr *
_readDistinctExpr(void)
{
	READ_LOCALS(DistinctExpr);

	READ_OID_FIELD(opno);
	READ_OID_FIELD(opfuncid);

	/*
	 * The opfuncid is stored in the textual format primarily for debugging
	 * and documentation reasons.  We want to always read it as zero to force
	 * it to be re-looked-up in the pg_operator entry.	This ensures that
	 * stored rules don't have hidden dependencies on operators' functions.
	 * (We don't currently support an ALTER OPERATOR command, but might
	 * someday.)
	 */
	local_node-&gt;opfuncid = InvalidOid;

	READ_OID_FIELD(opresulttype);
	READ_BOOL_FIELD(opretset);
	READ_NODE_FIELD(args);
	READ_LOCATION_FIELD(location);

	READ_DONE();
}
</pre>
</td></tr>
<tr><td>
Lines 531 - 555 of examples/postgresql//smallpostgresql/readfuncs.c.ifdefed
<pre>
static OpExpr *
_readOpExpr(void)
{
	READ_LOCALS(OpExpr);

	READ_OID_FIELD(opno);
	READ_OID_FIELD(opfuncid);

	/*
	 * The opfuncid is stored in the textual format primarily for debugging
	 * and documentation reasons.  We want to always read it as zero to force
	 * it to be re-looked-up in the pg_operator entry.	This ensures that
	 * stored rules don't have hidden dependencies on operators' functions.
	 * (We don't currently support an ALTER OPERATOR command, but might
	 * someday.)
	 */
	local_node-&gt;opfuncid = InvalidOid;

	READ_OID_FIELD(opresulttype);
	READ_BOOL_FIELD(opretset);
	READ_NODE_FIELD(args);
	READ_LOCATION_FIELD(location);

	READ_DONE();
}
</pre>
</td></tr>
<tr><td>
Lines 913 - 937 of examples/postgresql//smallpostgresql/readfuncs.c.ifdefed
<pre>
static NullIfExpr *
_readNullIfExpr(void)
{
	READ_LOCALS(NullIfExpr);

	READ_OID_FIELD(opno);
	READ_OID_FIELD(opfuncid);

	/*
	 * The opfuncid is stored in the textual format primarily for debugging
	 * and documentation reasons.  We want to always read it as zero to force
	 * it to be re-looked-up in the pg_operator entry.	This ensures that
	 * stored rules don't have hidden dependencies on operators' functions.
	 * (We don't currently support an ALTER OPERATOR command, but might
	 * someday.)
	 */
	local_node-&gt;opfuncid = InvalidOid;

	READ_OID_FIELD(opresulttype);
	READ_BOOL_FIELD(opretset);
	READ_NODE_FIELD(args);
	READ_LOCATION_FIELD(location);

	READ_DONE();
}
</pre>
</td></tr>
</table>
<h3>Clone class 7, 2 fragments, nominal size 10 lines, similarity 70%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 127 - 140 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
lappend(List *list, void *datum)
{
	Assert(IsPointerList(list));

	if (list == NIL)
		list = new_list(T_List);
	else
		new_tail_cell(list);

	lfirst(list-&gt;tail) = datum;
	check_list_invariants(list);
	return list;
}
</pre>
</td></tr>
<tr><td>
Lines 258 - 271 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
lcons(void *datum, List *list)
{
	Assert(IsPointerList(list));

	if (list == NIL)
		list = new_list(T_List);
	else
		new_head_cell(list);

	lfirst(list-&gt;head) = datum;
	check_list_invariants(list);
	return list;
}
</pre>
</td></tr>
</table>
<h3>Clone class 8, 2 fragments, nominal size 10 lines, similarity 70%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 163 - 176 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
lappend_oid(List *list, Oid datum)
{
	Assert(IsOidList(list));

	if (list == NIL)
		list = new_list(T_OidList);
	else
		new_tail_cell(list);

	lfirst_oid(list-&gt;tail) = datum;
	check_list_invariants(list);
	return list;
}
</pre>
</td></tr>
<tr><td>
Lines 294 - 307 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
lcons_oid(Oid datum, List *list)
{
	Assert(IsOidList(list));

	if (list == NIL)
		list = new_list(T_OidList);
	else
		new_head_cell(list);

	lfirst_oid(list-&gt;head) = datum;
	check_list_invariants(list);
	return list;
}
</pre>
</td></tr>
</table>
<h3>Clone class 9, 4 fragments, nominal size 10 lines, similarity 70%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 484 - 499 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
bool
list_member_int(List *list, int datum)
{
	ListCell   *cell;

	Assert(IsIntegerList(list));
	check_list_invariants(list);

	foreach(cell, list)
	{
		if (lfirst_int(cell) == datum)
			return true;
	}

	return false;
}
</pre>
</td></tr>
<tr><td>
Lines 504 - 519 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
bool
list_member_oid(List *list, Oid datum)
{
	ListCell   *cell;

	Assert(IsOidList(list));
	check_list_invariants(list);

	foreach(cell, list)
	{
		if (lfirst_oid(cell) == datum)
			return true;
	}

	return false;
}
</pre>
</td></tr>
<tr><td>
Lines 464 - 479 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
bool
list_member_ptr(List *list, void *datum)
{
	ListCell   *cell;

	Assert(IsPointerList(list));
	check_list_invariants(list);

	foreach(cell, list)
	{
		if (lfirst(cell) == datum)
			return true;
	}

	return false;
}
</pre>
</td></tr>
<tr><td>
Lines 443 - 458 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
bool
list_member(List *list, void *datum)
{
	ListCell   *cell;

	Assert(IsPointerList(list));
	check_list_invariants(list);

	foreach(cell, list)
	{
		if (equal(lfirst(cell), datum))
			return true;
	}

	return false;
}
</pre>
</td></tr>
</table>
<h3>Clone class 10, 2 fragments, nominal size 10 lines, similarity 70%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 145 - 158 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
lappend_int(List *list, int datum)
{
	Assert(IsIntegerList(list));

	if (list == NIL)
		list = new_list(T_IntList);
	else
		new_tail_cell(list);

	lfirst_int(list-&gt;tail) = datum;
	check_list_invariants(list);
	return list;
}
</pre>
</td></tr>
<tr><td>
Lines 276 - 289 of examples/postgresql//smallpostgresql/list.c.ifdefed
<pre>
List *
lcons_int(int datum, List *list)
{
	Assert(IsIntegerList(list));

	if (list == NIL)
		list = new_list(T_IntList);
	else
		new_head_cell(list);

	lfirst_int(list-&gt;head) = datum;
	check_list_invariants(list);
	return list;
}
</pre>
</td></tr>
</table>
<h3>Clone class 11, 3 fragments, nominal size 9 lines, similarity 77%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 892 - 903 of examples/postgresql//smallpostgresql/outfuncs.c.ifdefed
<pre>
static void
_outDistinctExpr(StringInfo str, DistinctExpr *node)
{
	WRITE_NODE_TYPE("DISTINCTEXPR");

	WRITE_OID_FIELD(opno);
	WRITE_OID_FIELD(opfuncid);
	WRITE_OID_FIELD(opresulttype);
	WRITE_BOOL_FIELD(opretset);
	WRITE_NODE_FIELD(args);
	WRITE_LOCATION_FIELD(location);
}
</pre>
</td></tr>
<tr><td>
Lines 879 - 890 of examples/postgresql//smallpostgresql/outfuncs.c.ifdefed
<pre>
static void
_outOpExpr(StringInfo str, OpExpr *node)
{
	WRITE_NODE_TYPE("OPEXPR");

	WRITE_OID_FIELD(opno);
	WRITE_OID_FIELD(opfuncid);
	WRITE_OID_FIELD(opresulttype);
	WRITE_BOOL_FIELD(opretset);
	WRITE_NODE_FIELD(args);
	WRITE_LOCATION_FIELD(location);
}
</pre>
</td></tr>
<tr><td>
Lines 1159 - 1170 of examples/postgresql//smallpostgresql/outfuncs.c.ifdefed
<pre>
static void
_outNullIfExpr(StringInfo str, NullIfExpr *node)
{
	WRITE_NODE_TYPE("NULLIFEXPR");

	WRITE_OID_FIELD(opno);
	WRITE_OID_FIELD(opfuncid);
	WRITE_OID_FIELD(opresulttype);
	WRITE_BOOL_FIELD(opretset);
	WRITE_NODE_FIELD(args);
	WRITE_LOCATION_FIELD(location);
}
</pre>
</td></tr>
</table>
<h3>Clone class 12, 2 fragments, nominal size 7 lines, similarity 71%
</h3>
<table cellpadding=12 border=2 frame="box" width="90%">
<tr><td>
Lines 1002 - 1012 of examples/postgresql//smallpostgresql/readfuncs.c.ifdefed
<pre>
static SetToDefault *
_readSetToDefault(void)
{
	READ_LOCALS(SetToDefault);

	READ_OID_FIELD(typeId);
	READ_INT_FIELD(typeMod);
	READ_LOCATION_FIELD(location);

	READ_DONE();
}
</pre>
</td></tr>
<tr><td>
Lines 987 - 997 of examples/postgresql//smallpostgresql/readfuncs.c.ifdefed
<pre>
static CoerceToDomainValue *
_readCoerceToDomainValue(void)
{
	READ_LOCALS(CoerceToDomainValue);

	READ_OID_FIELD(typeId);
	READ_INT_FIELD(typeMod);
	READ_LOCATION_FIELD(location);

	READ_DONE();
}
</pre>
</td></tr>
</table>
</body>
</html>
