
%\documentclass[conference]{IEEEtran}
\documentclass{sig-alternate}

\usepackage{cite}
\usepackage{color}
\usepackage{courier}
\usepackage{url}
\usepackage{tikz}

\usepackage{balance} % Add this back in. Probably needed during camera ready.
\usepackage[numbers]{natbib} % Used to fix formatting issue.
\usepackage{pgfplots}

%%

%\usepackage{graphicx}% http://ctan.org/pkg/graphicx

%\usepackage{listings}
%\usepackage{pxfonts}
%\usepackage{times}
%\usepackage{xspace}
%\usepackage{booktabs}
%\usepackage{fancybox}

%\usepackage{multirow}
%\usepackage{array}
%\usepackage{tabularx}
%\usepackage{url}
%\urlstyle{same}
%\usepackage{xcolor}


\usepackage{caption}
\usetikzlibrary{shapes,arrows}
\usetikzlibrary{patterns}
\usepackage[numbers]{natbib} % Used to fix formatting issue.
\usepackage{soul} % Needed for wrapping of highlighted text

% Define bar chart colors
%
\definecolor{bblue}{HTML}{4F81BD}
\definecolor{rred}{HTML}{C0504D}
\definecolor{ggreen}{HTML}{9BBB59}
\definecolor{ggrey}{HTML}{707070}
%\definecolor{ppurple}{HTML}{9F4C7C}


% Define flow chart styles
\tikzstyle{decision} = [diamond, draw, fill=blue!20,
    text width=15em, text badly centered, node distance=3cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, fill=blue!20,
    text width=15em, text centered, rounded corners, minimum height=4em]
\tikzstyle{line} = [draw, -latex']

\usetikzlibrary{shapes,arrows, positioning} % Needed for analysis diagram

\newcommand{\todo}[1]{\textcolor{cyan}{\textbf{[#1]}}}
%\newcommand{\xxx}[1]{\textcolor{green}{{\it [xxx says: #1]}}}
\newcommand{\dan}[1]{\textcolor{blue}{{\it [Dan says: #1]}}}
%\newcommand{\andy}[1]{\textcolor{blue}{{\it [Andy says: #1]}}}
%\newcommand{\sam}[1]{\textcolor{blue}{{\it [Sam says: #1]}}}



\begin{document}

% Update this title?
\title{XWhy Permission-Gaps Occur in Android Applications, their Effects, and How they can be Prevented.X}

\numberofauthors{1}

\author{
%
% 1st. author
\alignauthor
XXXXXXXXXXXXXXXXXXXXXXX\\ 	
	\affaddr{Software Engineering Department}\\
       \affaddr{Rochester Institute of Technology}\\
       \affaddr{1 Lomb Memorial Drive}\\
       \affaddr{Rochester, NY, USA} \\
       \email{\{dxkvse, xxx\}@rit.edu}
}
\maketitle



\begin{abstract}
Abstract

% Write up the abstract to give us an idea of what we are going to be working on


% Main focal point of paper
%   Why do over privs occur
%   When do they occur
%   How can they be prevented
%   How do overprivs and Androrisk affect security
%Secondary
%   Show lifecycle of security over several Android apps



\end{abstract}



\section{Introduction}






\section{Research Questions}
\label{sec: researchquestions}


\textbf{RQX:}~\emph{What are the most pervasive overprivileges?}\\
% Describe why they occurred
Blah


\textbf{RQX:}~\emph{What is the variation of risks across genres?}\\
Blah


\textbf{RQX:}~\emph{How does code quality ?}\\
Blah


\textbf{RQX:}~\emph{What causes apps to be under prived? ?}\\
Blah
%   Are certain kits/uses the cause of apps being over prived? - For example, "android.webkit.WebView.<init>: [android.permission.INTERNET]" - leads an app to be over prived?
%       Is this a problem with the tool?


\textbf{RQX:}~\emph{Why do over privs occur and what can be done to prevent them?}\\
Blah
%%%% Analyze

%%  When are they introduced in the development cycle
%%  Do the same methods have overprivs? - Could this just be related to the selected tool. Maybe the tool messes up in the same areas?
%%  



\textbf{RQX:}~\emph{How does code quality, and the vulnerability of apps compare over time ?}\\
%%% Look at the lifecycle of apps
Blah


\textbf{RQX:}~\emph{Do developers ever remove permissions?}\\
%%% Look at the lifecycle of apps
Look at commit histories and app histories to see if developers ever add permissions to apps and then remove them.


%% Look at SQL to see the lifecycle of overprivs
%%  Initial results indicate that the overpriv rate only slightly increases


%% Look at Commit histories of apps to see the permissions in each commit





\textbf{RQX:}~\emph{What functionality additions cause over privs?}\\
%   Does stowaway say what caused the over privs?
%   Is there
%   Which permissions are most over prived?


% How many version/app updates actually deal with permissions? Do most just change small parts of functionality?
%   This may have been previously addressed. Mei's? work?



% Are there newer tools than stowaway?



% We collected Darwin to provide a larger result set
% Identical reverse engineering and analysis process was used on both
% Drive home that the same reverse engineering process has been used in other papers and is sound. Do not let people question what we are doing.



%% Look and see when permissions are added in general
%       Doesn't have to be an overpriv



% Do over privs lead to more overprivs?
%   If an app has 1 overpriv, is it more likely to be over prived?


%% Write a bash script to help with this?


% Commit keywords with an overpriv?
%   Bug fix
%   New commiter?



\label{sec: androidapplications}
\section{Android Applications}
%% External file so it can be easily included/excluded
%\input{sections/AndroidApps.tex}

blah

\label{sec: appcollection}
\section{App Collection \& Static Analysis}
%% External file so it can be easily included/excluded
%\input{sections/AppCollectionDecompile.tex}



\section{Evaluation}
\label{sec: evaluation}


%% Group apps by version and chart their
%       Permission Rate
%       Over Priv rate
%       Androrisk rate



%%% Look at the total number of permissions in Release 1, 2, 3 vs number of over privs


\begin{table}[h]
\begin{center}
\caption{Rate of Over Privs for 3 versions}
\label{Table:TotalStatsForVersionGroups}
  \begin{tabular}{| l | c | c | c | c |} \hline

        \bfseries Version Group &	\bfseries Over Privs &	\bfseries Permissions & \bfseries Oprivs/Perm & \bfseries Androrisk \\ \hline
        1 & 193 & 1559 & 1.238 &  \\ \hline
        2 & 199 & 1623 & 1.226 & \\ \hline
        3 & 220 & 1655 & 1.329 & \\ \hline

  \end{tabular}
  \end{center}
\end{table}





\begin{figure*}[ht!]
\centering
\includegraphics[width=120mm,scale=.3]{images/temp_permissionCountPerCommit.png}
%\caption{Average Results for each group}
\end{figure*}




\subsection{OverPriv Rate}





We next sought to determine if applications have more permissions added throughout the development process. In order to evaluate this, we looked at the commit histories for AndroidManfiest.xml files and counted the number of permissions in each commit of the file. We then looked at commits 1-X of the files in increments of X. We found that..


Our findings are shown in Figure X:



- looked at X apps to provide enough detail
- Looked at the same X apps for X versions




\begin{figure*}[ht!]
\centering
\includegraphics[width=180mm,scale=1.0]{images/temp_AverageResults.png}
\caption{Average Results for each group}
\end{figure*}

%%% State the major problems found in the Darwin dataset

% Answer the research questions here
% When did the overpriv rate grow in the Androsec apps


% Describe how pervasive apps with over privs are

\begin{table}[h]
\begin{center}
\caption{Applications With Overprivileges}
\label{Table:appswithoverPrivs}
  \begin{tabular}{| c | c | c | c |} \hline
& \multicolumn{3}{ c | }{\bfseries \%Apps} \\ \hline
    $ \geq \mathbf{OverPrivs}$  & $\mathbf{\geq 10K}$  &   $ < \mathbf{10K}$ & \textbf{F-Droid} \\ \hline

        1 &	X &	X & X \\ \hline
        2 &	X &	X & X\\ \hline
        3 &	X &	X & X\\ \hline
        4 &	X &	X & X\\ \hline
        5 &	X &	X & X\\ \hline
        6 &	X &	X & X\\ \hline
        7 &	X &	X & X\\ \hline
        8 &	X &	X & X\\ \hline
        9 &	X &	X & X\\ \hline
        10 &	X &	X & X\\ \hline
        10+ & X & X & X \\ \hline

  \end{tabular}
  \end{center}
\end{table}



%%% Next analyze the rate of permissions in apps compared to the number of over privs that they have




%% Show the lifecycle of apps from F-droid their over priv rate & androrisk

\begin{figure*}
\begin{center}
\begin{tikzpicture}
\begin{axis}[
   smooth,
   width=18cm,
   height=10cm,
   enlargelimits=0.15,
  %xlabel={Version Group \# (e.g. 0 is $0 \leq v < 1.0$)}
  ,
  %ylabel={Count},
  symbolic x coords={0,1,2,3,4,5,6,7},
  xtick=data,
  x tick label style={rotate=0,anchor=north},
% legend pos=north west, % original
  legend pos=north west, font=\small, ,line width=.8pt,mark size=.2pt,
 axis y discontinuity=parallel,
]


\addplot [color=green,dotted,mark=*,mark options={solid},smooth] plot coordinates {(0,2.76) (1,2.891) (2,2.933) (3,3.172) (4,3.376) (5,3.678)};
\addlegendentry{Security Risk}


\addplot [color=black,densely dotted,mark=*,mark options={solid},smooth] plot coordinates {(0,.67) (1,1.37) (2,1.89) (3,1.94) (4,1.99) (5,2.07)};
\addlegendentry{Permission Count}


\addplot [color=blue,dashdotted,mark=*,mark options={solid},smooth] plot coordinates {(0,1.0) (1,1.2) (2,1.3) (3,1.1) (4,1.0) (5,1.3)};
\addlegendentry{OPriv-Ratio}


\end{axis}
\end{tikzpicture}
\label{fig:VersionEffect}
\caption{Maturity and Metrics (RQX) - Needs to be updated}
\end{center}
\end{figure*}

%%% What are the most pervasive over privs and when did they occur?
\todo{Version\_order is not correct in the queries and needs to be fixed.}













\subsection{Overpriv Analysis}
\todo{Look at some specific apps here and do more of an in depth analysis}
In order to better understand why over privileges \& vulnerabilities occur in Android applications, we selected several open source Android apps from the F-Droid data set and analyzed their development process by examining both their Git histories, application version histories, and the source code of each app. We chose apps that were reasonably popular and.... We will discuss the X selected apps below

https://github.com/AndroSec/VersionControlExtractor.git



%%% Find the names of the overprivs for each version
%       See when each was added during the development cycle
%       Who added them
%       What was the commit message





\textbf{2048}\\
% 2048 -
%   http://androsec.rit.edu/analytics/280
%   http://darwin.rit.edu/analytics/159

%       No data for darwin, but Manifest info on Androsec

%2048\footnote{\url{https://play.google.com/store/apps/details?id=com.estoty.game2048}} is a popular Number puzzle game with over XXX downloads. F-Droid holds a popular port of the game


%   14 manifest commits
%   4 major versions
%   37 GH commits % Not many
%   No overprivs in any versions






%% Do people know they are making a commit that causes the over priv?


%% Who is making the over privs







%%% Next analyze some apps in the Androsec dataset
%%% Added 4/29
% In the analysis of GooglePlay apps, we found that Communication, productivity and social apps had the highest rate of overpriviledge. In order to better understand why these over privileges are occurring, we examined several applications from each genre from the F-Droid Android repository. We sought to determine when, why and how these over privileges were introduced.


%%%%% Probably not needed
% The first step was to find apps that existed in both data sets for each of the respective genres. This was somewhat difficult since both data sets do not contain the same apps, and the F-droid repository only contains XXX apps while our GooglePlay repo holds a much larger number of apps, XXX.



%%% Specific Apps

    %wifi automatic
    %FTP Server (Demo)

    %UberSync for Facebook
    %XBMC Remote
    %Document Viewer



%? Are the same categories the most overprived in both darwin & Androsec


%- Compare darwin vs Androsec genre rates
%- Examine some Androsec apps. Find good examples to examine.





% FBReader - 818
%   A commit message describes that the permission was added
%   Most versions of the app have no overprivs, until the very end.

% ACal - 442


% ownCloud - 528



% NetworkLog - 761


% Terminal Emulator - 710



% WordPress - 1158
%   Overpriv is added near the final version of the app
%       Camera was the overpriv
% No manifest commit info



%  --- Double check all of these to make sure that they actually have information


%%%% Some good basic examples of information changing
% --- Look at what I started to write up



%%% Look at the overall rate of permissions compared to the rate of overprivs
%%%%    Look @ recorded permissions either in the DB or in the Manifest files for all apps as an aggregate




% UberSync for Facebook 963/654
%   Manifest commits:       33
%   Major versions:         5
%   GH commits              129
%   Overprivs:              Oprivs increase over time



% XBMC Remote 144/638
%   Manifest commits:       X
%   Major versions:         X
%   GH commits              X
%   Overprivs:              X





% AppName X/X
%   Manifest commits:       X
%   Major versions:         X
%   GH commits              X
%   Overprivs:              X



%%% More case study items

% org.durka.hallmonitor
%







\section{Security \& User Ratings}
\label{sec: userratings}
% Use much of what we had for our rejected MSR paper





\section{Recommendations}
\label{sec:recommendations}







\section{Publicly Available Dataset}
\label{sec:dataset}

% Talk about Darwin and Androsec here
% Most of this can be reused from the ICSE paper
% Make sure this doesn't tie too much into what we are doing for SAC



\section{Limitations}
\label{sec:limitations}




\section{Related Work}
\label{sec: relatedwork}
%% External file so it can be easily included/excluded
%\input{sections/relatedwork.tex}



% Find papers that look at manifest files/permissions to see how they evolve over time





\section{Conclusion}
\label{sec: conclusion}


%\section*{Acknowledgment}

%This research would not have been possible without the hard work by two dedicated Software Engineering Students: Shannon Trudeau and Adam Blaine. We would like to thank them for their dedication and the insights they have provided on this project.


\balance
\bibliographystyle{abbrv} % This style looks to be good. Check out: http://cse.unl.edu/~tyu/docs/simrt.pdf
\bibliography{AndroidData}

% that's all folks

\end{document}


%%%%
%   ICSE = 10 pages



%%%% Actions
% When reporting information back, really try to examine the "WHYS" for everything. Do not just present results.
% ? Should we focus on Jlint and things at all?


%%% Todo
% Put into desired format & page length
% Keep consistent with over priv/over permission - See what was said in MSR paper that did not get in
% How can Darwin be tied into this somehow


%%% Other possible RQs
%   Do more different committers lead to worse code?
%   Look at general quality of commit messages



% Get apps with at least X versions from Darwin?
%   May not have enough of a time period between each app for them to be useful


% Really focus on why they occur
% Tie user ratings into this paper. ICSE?
%


% ? - Related paper to see if permissions are being removed
%   WHY are they being added/removed
%   % Check to see if specific function calls are over/underprived -
%


% Will really need to dig deep and say WHY


% Write in a way that is clear. Really drive home what you are doing. Readers make the decision in the 1st page if they are going to accept/reject the paper.

% Try downloading older versions of apps - http://www.apk4fun.com/apk/6152/


% ICSE - 10 pages 